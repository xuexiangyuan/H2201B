<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <script>

        //要实现一个深拷贝
        // 先写一个函数 
        // 判断当前传入值的数据类型
        // null不需要拷贝
        // Date不需要拷贝
        // regexp 正则不需要拷贝
        // 不是对象不需要拷贝
        // 最终生成一个对象的构造器
        // 进行循环赋值
        // 返回当前值

        // 递归实现 深拷贝
        // function deepClone(boj){
        //     if(typeof obj !== 'object' || obj==null){
        //         return obj
        //     }
        //     let result
        //     if(obj instanceof Array){
        //         result = []
        //     }
        //     else{
        //         result ={}
        //     }
        //     if(obj instanceof Date){
        //         return new Date(obj)
        //     }
        //     if(obj instanceof RegExp){
        //         return new RegExp(obj)
        //     }
        //     for(let key in obj){
        //         if( obj.hasOwnProperty(key)){
        //             result[key] = deepClone(obj[key])
        //         }
        //     }
        //     return result
        // }
        // let obj ='123'
        // let obj1 ='456'
        // obj1=deepClone(obj)
        // console.log(obj1);
        // console.log(obj);

         // 递归实现 深拷贝2
        // function deepClone(obj){
        //     if(typeof obj != 'object' || obj==null){
        //         return obj
        //     }
        //     let result
        //     if(obj instanceof Array){
        //         result =[]
        //     }
        //     else{
        //         result ={}
        //     }
        //     if(obj instanceof Date){
        //         return new Date(obj)
        //     }
        //     if(obj instanceof RegExp){
        //         return new RegExp(obj)
        //     }
        //     for(let key in obj){
        //         if(obj.hasOwnProperty(key)){
        //             result[key] =deepClone(obj[key])
        //         }
        //     }
        //     return result
        // }
        // let obj ='123'
        // let obj1 ='456'
        // obj1=deepClone(obj)
        // console.log(obj1);
        // console.log(obj);

        
        // 递归实现 深拷贝2
        // function deepClone(obj){
        //     if(typeof obj !== 'object' || obj ==null){
        //         return obj
        //     }
        //     let result  
        //     if(obj instanceof Array){
        //         result=[]
        //     }
        //     else{
        //         result ={}
        //     }
        //     if(obj instanceof Date){
        //         return new Date(obj)
        //     }
        //     if(obj instanceof RegExp){
        //         return new RegExp(obj)
        //     }
        //     for(let key in obj){
        //         if(obj.hasOwnProperty(key)){
        //             result[key]=deepClone(obj[key])
        //         }
        //     }
        //     return result
        // }
        
        // let obj ='123'
        // let obj1='456'
        // obj1=deepClone(obj)
        // console.log(obj1);
        // console.log(obj);




        // 深浅拷贝的集中方法

        // 1.浅拷贝
        // 1.Object.assign() 
        // let aa = {
        //     a: undefined,
        //     func: function () { console.log(1) },
        //     b: 2,
        //     c: { x: 'xxx', xx: undefined },
        //     d: null,
        //     e: BigInt(100),
        //     f: Symbol('s')
        // }
        // let bb = Object.assign({}, aa)
        // aa.c.x = 111
        // console.log(bb)


        // 1.Object.assign() 
        // let aa = {
        //     a: undefined,
        //     func: function () { console.log(1) },
        //     b: 2,
        //     c: { x: 'xxx', xx: undefined },
        //     d: null,
        //     e: BigInt(100),
        //     f: Symbol('s')
        // }
        // let bb = Object.assign({}, aa)
        // aa.c.x = 111
        // console.log(bb)


        // 1.Object.assign() 
        // let aa = {
        //     a: undefined,
        //     func: function () { console.log(1) },
        //     b: 2,
        //     c: { x: 'xxx', xx: undefined },
        //     d: null,
        //     e: BigInt(100),
        //     f: Symbol('s')
        // }
        // let bb = Object.assign({}, aa)
        // aa.c.x = 111
        // console.log(bb)




        // 2.Object.create()
        // let aa = {
        //     a: undefined,
        //     func: function () { console.log(1) },
        //     b: 2,
        //     c: { x: 'xxx', xx: undefined },
        // }
        // let dd = Object.create(aa, Object.getOwnPropertyDescriptors(aa))
        // aa.c.x = 111
        // console.log(dd)


        // let aa = {
        //     a: undefined,
        //     func: function () { console.log(1) },
        //     b: 2,
        //     c: { x: 'xxx', xx: undefined },
        // }
        // let dd = Object.create(aa, Object.getOwnPropertyDescriptors(aa))
        // aa.c.x = 111
        // console.log(dd)


        // let aa = {
        //     a: undefined,
        //     func: function () { console.log(1) },
        //     b: 2,
        //     c: { x: 'xxx', xx: undefined },
        // }
        // let dd = Object.create(aa, Object.getOwnPropertyDescriptors(aa))
        // aa.c.x = 111
        // console.log(dd)




        // 2.深拷贝
        // 通过JSON.stringify()
        // var a = { a: 1, b: 2 }
        // var b = JSON.stringify(a);
        // a.a = 'a'
        // console.log(a, b) // { a: 'a', b: 2 } {"a":1,"b":2}


        // 2.深拷贝
        // 通过JSON.stringify()
        // var a = { a: 1, b: 2 }
        // var b = JSON.stringify(a);
        // a.a = 'a'
        // console.log(a, b) // { a: 'a', b: 2 } {"a":1,"b":2}


        // 2.深拷贝
        // 通过JSON.stringify()
        // var a = { a: 1, b: 2 }
        // var b = JSON.stringify(a);
        // a.a = 'a'
        // console.log(a, b) // { a: 'a', b: 2 } {"a":1,"b":2}




        // 继承的方法
        console.log('==============原型继承=========');
        // function Super(){this.a=1}
        // Super.prototype.say=function(){console.log('hhh');}
        // function Sub(){}
        // Sub.prototype=new Super()

        // const test =new Sub()
        // console.log(test.say());


        // function Super(){this.a=1}
        // Super.prototype.say=function(){console.log('hhh');}
        // function Sub(){}
        // Sub.prototype=new Super()

        // const test =new Sub()
        // console.log(test.say());


        // function Super(){this.a=1}
        // Super.prototype.say=function(){console.log('hhh');}
        // function Sub(){}
        // Sub.prototype=new Super()

        // const test =new Sub()
        // console.log(test.say());


        console.log('==============原型被污染=========');
        
        // function Super (){
        //     this.a=[1,2]
        // }
        // function Sub(){}
        // Sub.prototype=new Super()

        // const test=new Sub()
        // test.a.push(3)
        // console.log(test.a);
        // const test1 =new Sub()
        // console.log(test1.a);


        // function Super (){
        //     this.a=[1,2]
        // }
        // function Sub(){}
        // Sub.prototype=new Super()

        // const test=new Sub()
        // test.a.push(3)
        // console.log(test.a);
        // const test1 =new Sub()
        // console.log(test1.a);


        // function Super (){
        //     this.a=[1,2]
        // }
        // function Sub(){}
        // Sub.prototype=new Super()

        // const test=new Sub()
        // test.a.push(3)
        // console.log(test.a);
        // const test1 =new Sub()
        // console.log(test1.a);


        console.log('==============盗用构造函数=========');


        // let Super =function(){
        //     this.a=1
        // }
        // Super.prototype.c=3
        // let Sub =function(){
        //     console.log(this,'this');
        //     Super.call(this)
        //     this.b=2
        // }
        // const test=new Sub()
        // console.log(test,'test');
        

        // let Super =function(){
        //     this.a=1
        // }
        // Super.prototype.c=3
        // let Sub =function(){
        //     console.log(this,'this');
        //     Super.call(this)
        //     this.b=2
        // }
        // const test=new Sub()
        // console.log(test,'test');


        // let Super =function(){
        //     this.a=1
        // }
        // Super.prototype.c=3
        // let Sub =function(){
        //     console.log(this,'this');
        //     Super.call(this)
        //     this.b=2
        // }
        // const test=new Sub()
        // console.log(test,'test');


        console.log('==============原型式继承=========');

        // function Super (){this.a=[1,2]}
        // Super.prototype.say=function(){console.log('hhh');}
        // function Sub (){
        //     Super.call(this)
        //     this.b=2
        // }

        // Sub.prototype=new Super()
        // const test =new Sub()
        // console.log(test.say());
        // test.a.push(3)
        // console.log(test);

        // function Super (){this.a=[1,2]}
        // Super.prototype.say=function(){console.log('hhh');}
        // function Sub (){
        //     Super.call(this)
        //     this.b=2
        // }

        // Sub.prototype=new Super()
        // const test =new Sub()
        // console.log(test.say());
        // test.a.push(3)
        // console.log(test);


        // function Super (){this.a=[1,2]}
        // Super.prototype.say=function(){console.log('hhh');}
        // function Sub (){
        //     Super.call(this)
        //     this.b=2
        // }

        // Sub.prototype=new Super()
        // const test =new Sub()
        // console.log(test.say());
        // test.a.push(3)
        // console.log(test);


        console.log('==============组合继承=========');

        // es5之前
        // const obj ={a:1}
        // function createObj(o){
        //     function Fn(){}
        //     Fn.prototype =o
        //     return new Fn()
        // }
        // const test =createObj(obj)
        // console.log(test);

        // es6之后
        // const obj = { a:1 }

        // const test = Object.create(obj)
        // console.log(test);

        // const obj ={a:1}
        // function createObj(o){
        //     function Fn(){}
        //     Fn.prototype =o
        //     return new Fn()
        // }
        // const test =createObj(obj)
        // console.log(test);


        // const obj = { a:1 }
        // const test = Object.create(obj)
        // console.log(test);


        // const obj ={a:1}
        // function createObj(o){
        //     function Fn(){}
        //     Fn.prototype =o
        //     return new Fn()
        // }
        // const test =createObj(obj)
        // console.log(test);


        // const obj = { a:1 }
        // const test = Object.create(obj)
        // console.log(test);

        console.log('==============寄生式继承=========');

        // function createObj(o){
        //     let clone =ObjectCopy(o)
        //     clone.say =function(){
        //         console.log('hhhhhh');
        //     }
        //     return clone
        // }
        // const obj ={a:1}
        // const test =createObj(obj)

        // function createObj(o){
        //     let clone =ObjectCopy(o)
        //     clone.say =function(){
        //         console.log('hhhhhh');
        //     }
        //     return clone
        // }
        // const obj ={a:1}
        // const test =createObj(obj)

        // function createObj(o){
        //     let clone =ObjectCopy(o)
        //     clone.say =function(){
        //         console.log('hhhhhh');
        //     }
        //     return clone
        // }
        // const obj ={a:1}
        // const test =createObj(obj)



        console.log('==============寄生式组合继承=========');

        // function Super(){this.a=[1,2]}
        // Super.prototype.say =function(){console.log('hhh');}
        // function Sub(){
        //     Super.call(this)
        //     this.b=2
        // }
        // Sub.prototype = Object.create(Super.prototype)
        // Sub.prototype.constructor = Sub
        // const test = new Sub()
        // console.log(test);

        // function Super(){this.a=[1,2]}
        // Super.prototype.say =function(){console.log('hhh');}
        // function Sub(){
        //     Super.call(this)
        //     this.b=2
        // }
        // Sub.prototype = Object.create(Super.prototype)
        // Sub.prototype.constructor = Sub
        // const test = new Sub()
        // console.log(test);

        // function Super(){this.a=[1,2]}
        // Super.prototype.say =function(){console.log('hhh');}
        // function Sub(){
        //     Super.call(this)
        //     this.b=2
        // }
        // Sub.prototype = Object.create(Super.prototype)
        // Sub.prototype.constructor = Sub
        // const test = new Sub()
        // console.log(test);



        // 原型 原型链

        // function Person () {
            
        // }
        // const person = new Person() // 通过new操作符创建一个实例
        // console.log(person instanceof Person) // true

        // function Person () {
            
        // }
        // const person = new Person() // 通过new操作符创建一个实例
        // console.log(person instanceof Person) // true

        // function Person () {
            
        // }
        // const person = new Person() // 通过new操作符创建一个实例
        // console.log(person instanceof Person) // true




        // function Person () {

        // }
        // Person.prototype.sayHi = 'Hi'
        // const person = new Person() // 通过new操作符创建一个实例
        // console.log(person.sayHi)   // Hi
        // console.log(person.__proto__ === Person.prototype) // true

        // function Person () {

        // }
        // Person.prototype.sayHi = 'Hi'
        // const person = new Person() // 通过new操作符创建一个实例
        // console.log(person.sayHi)   // Hi
        // console.log(person.__proto__ === Person.prototype) // true

        // function Person () {

        // }
        // Person.prototype.sayHi = 'Hi'
        // const person = new Person() // 通过new操作符创建一个实例
        // console.log(person.sayHi)   // Hi
        // console.log(person.__proto__ === Person.prototype) // true



        // function Person () {

        // }
        // Person.prototype.sayHi = 'Hi'
        // const person = new Person() // 通过new操作符创建一个实例
        // console.log(person.sayHi)   // Hi
        // console.log(person.__proto__ === Person.prototype)   // true
        // console.log(Person.prototype.constructor === Person) // true

        // function Person () {

        // }
        // Person.prototype.sayHi = 'Hi'
        // const person = new Person() // 通过new操作符创建一个实例
        // console.log(person.sayHi)   // Hi
        // console.log(person.__proto__ === Person.prototype)   // true
        // console.log(Person.prototype.constructor === Person) // true

        // function Person () {

        // }
        // Person.prototype.sayHi = 'Hi'
        // const person = new Person() // 通过new操作符创建一个实例
        // console.log(person.sayHi)   // Hi
        // console.log(person.__proto__ === Person.prototype)   // true
        // console.log(Person.prototype.constructor === Person) // true



        // const obj = {}
        // console.log(obj.__proto__ === Object.prototype) // true
        // console.log(obj.toString)  // ƒ toString() { [native code] }，toString是继承Object.prototype上的方法

        // const obj2 = new Object()
        // console.log(obj2.__proto__ === Object.prototype) // true
        // console.log(obj2.toString) // ƒ toString() { [native code] }

        // const obj = {}
        // console.log(obj.__proto__ === Object.prototype) // true
        // console.log(obj.toString)  
        // const obj2 = new Object()
        // console.log(obj2.__proto__ === Object.prototype) // true
        // console.log(obj2.toString) 

        // const obj= {}
        // console.log(obj.__proto__===Object.prototype) // true
        // console.log(obj.toString)  
        // const obj2= new Object()
        // console.log(obj2.__proto__===Object.prototype) // true
        // console.log(obj2.toString) 





        console.log('==============this的默认绑定=========');

            // function foo(){
            //     console.log(this);
            // }
            // foo()  //window
            // function foo(){
            //     console.log(this);
            // }
            // foo()
            // function foo(){
            //     console.log(this);
            // }
            // foo()

            // 案例二
            // function foo1(){
            //     console.log(this);
            // }

            // function foo2(){
            //     console.log(this);
            //     foo1()
            // }

            // function foo3(){
            //     console.log(this);
            //     foo2()
            // }
            // foo3() //window  window window

            // function foo1(){
            //     console.log(this);
            // }

            // function foo2(){
            //     console.log(this);
            //     foo1()
            // }

            // function foo3(){
            //     console.log(this);
            //     foo2()
            // }
            // foo3() //window  window window

            // function foo1(){
            //     console.log(this);
            // }

            // function foo2(){
            //     console.log(this);
            //     foo1()
            // }

            // function foo3(){
            //     console.log(this);
            //     foo2()
            // }
            // foo3() //window  window window

            console.log('========隐式绑定===========');
            // var obj ={
            //     name:'www',
            //     eating:function(){
            //         console.log(this.name+'嘻嘻嘻');
            //     },
            //     running:function(){
            //         console.log(obj.name+'嗷嗷嗷');
            //     }
            // }
            // var fn =obj.eating
            // fn()


            // var obj ={
            //     name:'www',
            //     eating:function(){
            //         console.log(this.name+'嘻嘻嘻');
            //     },
            //     running:function(){
            //         console.log(obj.name+'嗷嗷嗷');
            //     }
            // }
            // var fn =obj.eating
            // fn()

            // var obj ={
            //     name:'www',
            //     eating:function(){
            //         console.log(this.name+'嘻嘻嘻');
            //     },
            //     running:function(){
            //         console.log(obj.name+'嗷嗷嗷');
            //     }
            // }
            // var fn =obj.eating
            // fn()

            // console.log('========显示绑定=========');
            // function sum(num1, num2, num3) {
            // console.log(num1 + num2 + num3, this)  //90 String {"call"} 90 String {"apply"}
            // }

            // sum.call("call", 20, 30, 40)
            // sum.apply("apply", [20, 30, 40])

            // console.log('========显示绑定=========');
            // function sum(num1, num2, num3) {
            // console.log(num1 + num2 + num3, this)
            // }

            // sum.call("call", 20, 30, 40)
            // sum.apply("apply", [20, 30, 40])

            // console.log('========显示绑定=========');
            // function sum(num1, num2, num3) {
            // console.log(num1 + num2 + num3, this)
            // }

            // sum.call("call", 20, 30, 40)
            // sum.apply("apply", [20, 30, 40])


            console.log('======箭头函数的绑定======');
            // var func =()=>{
            //     console.log(this);
            // }
            // var obj ={
            //     ber:func
            // }
            // obj.ber()
            
            // var o={
            //     a:10,
            //     b:{
            //         a:12,
            //         fn:function(){
            //             console.log(this.a);
            //         }
            //     }
            // }
            // o.b.fn()  //b

            
            // var func =()=>{
            //     console.log(this);
            // }
            // var obj ={
            //     ber:func
            // }
            // obj.ber()
            
            // var o={
            //     a:10,
            //     b:{
            //         a:12,
            //         fn:function(){
            //             console.log(this.a);
            //         }
            //     }
            // }
            // o.b.fn() 


            var func =()=>{
                console.log(this);
            }
            var obj ={
                ber:func
            }
            obj.ber()
            
            var o={
                a:10,
                b:{
                    a:12,
                    fn:function(){
                        console.log(this.a);
                    }
                }
            }
            o.b.fn()
    </script>

</body>

</html>